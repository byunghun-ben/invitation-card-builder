# 청첩장 빌더 서비스 (Party Door)

## 페이지 구조

- / (랜딩 페이지)

- /auth

  - /login (로그인 페이지)
  - /register (회원가입 페이지)

- /mypage (내 페이지)

  - /invitations/create (초대장 생성 페이지)
  - /invitations/:id/edit (초대장 수정 페이지)
  - /invitations/:id/preview (초대장 미리보기 페이지)
  - /profile (프로필 페이지)
  - /settings (설정 페이지)
  - /share/invitations/:id (초대장 공유 페이지)

- /invitations/:id (초대장 상세 페이지)

## 문제

### 클라이언트 컴포넌트에서 action 함수에 props를 전달하는 방법

`.bind`를 통해 props를 전달할 수 있다.

### revalidatePath 이후의 데이터 동기화 문제

페이지 컴포넌트를 새로 받아와서, 컴포넌트가 리렌더링되긴 하지만 useState에 넘겨줄 서버 상태가 변경되어도 useState가 동기화되지는 않는다.

이를 해결하려면 2가지 방법이 있을 것 같음

1. 위젯의 업데이트가 성공했을 때, useState를 수동으로 업데이트하는 방법

- 유지보수가 힘들지는 않을까?

2. 모달 컴포넌트를 분리하여, 모달의 여닫힘 상태에 따라 마운트/언마운트 되도록 하는 방법 (이 방법으로 하자)

- 위젯 업데이트 성공 시, 모달을 닫도록 할 예정인데 이때 모달을 언마운트 시키면 이후 다시 그 모달을 열었을 때 useState가 새로 선언되기 때문에 서버 상태에 맞추어 동기화가 됨.

## 작업

### #0 Mongodb로 마이그레이션하기

1. Atlas 플랫폼을 통해 mongodb 적용하기
2. 데이터 베이스 이동하기

#### 문제점

- globalThis 타입 에러
  [참고 블로그](https://huns.me/2022-05-22-43-TypeScript%EC%97%90%EC%84%9C%20%EC%A0%84%EC%97%AD%20%EA%B0%9C%EC%B2%B4%20%ED%83%80%EC%9E%85%EC%9D%80%20%EC%96%B4%EB%96%BB%EA%B2%8C%20%EC%A0%95%EC%9D%98%ED%95%98%EB%82%98%EC%9A%94)

---

### #1 표지 위젯 추가하기

- 표지 이미지
- 표지 라벨

#### 작업 대상 페이지

- 수정 페이지

  - 표지 위젯 추가 및 관리

- 미리보기 페이지
  - 표지 위젯 보여주기

---

### #2 인사말 위젯 추가하기

- 수정 페이지

  - 인사말 위젯 추가 및 관리

- 미리보기 페이지

  - 인사말 위젯 보여주기

---

### #3 공유 페이지

#### 페이지 경로

`/invitations/:id`

#### 세부 작업 내용

- 모바일 기준의 레이아웃으로 구성합니다.
- 게시물에 반응(댓글 및 좋아요)을 할 수 있도록 합니다.

---
